

# 岁月史书

SSMT发展到如今的第四代，一共经历了如下迭代历程：

## (1)Python代码开发的: 3Dmigoto-Tailor

诞生背景：

1.GIMI只能完成原神的Mod制作，无法支持HSR和HI3

2.学了很久都没学会GIMI的使用，无奈只能自己制造

特性：

使用Python开发，快速验证相关概念，其内容几乎全部来自于对GIMI项目的模仿，以及对3Dmigoto格式的摸索

缺点：

1.很难使用，每次使用都需要打开一个PyCharm窗口，并手动填写一个DrawIB值，以及提取的FrameAnalysis目录

2.基于txt文件分析，做出来的时候只能支持HSR、HI3、GI这三个游戏的少部分模型提取

3.运行速度极慢，重新计算TANGENT值需要花费1分钟时间，导致每次生成Mod都需要执行很久

## (2)C++开发的控制台程序: 3Dmigoto-Wheel

诞生背景：

Tailor的速度太慢，无法满足快速计算需求，当时第一个想法就是用C++重写以改善速度

特性：

基于C++开发的CLI程序，通过读取json配置文件来进行模型提取和Mod生成，重计算TANGENT的速度极快

缺点：

1.很难使用，每次使用都需要编辑json文件来配置

2.基于txt文件分析，只能支持HSR、HI3、GI这三个游戏的少部分模型提取，相比于Tailor有所改善

## (3)C++开发的控制台程序 + Python开发的GUI界面：NMBT(NicoMico's Binary Tools)

诞生背景：

3Dmigoto-Wheel虽然满足基本使用，但是每次都要手动编写json文件来进行配置，于是想要开发GUI界面来操作JSON文件

特性：

基于C++开发的CLI程序，速度极快，基于Python Tkinter开发的简单GUI界面，初步满足Mod制作需求

缺点：

- 基于txt文件分析，只支持少部分模型提取，无法支持UE类型游戏。
- 图形化界面过于丑陋，用户需安装Python运行环境才能运行。
- 仅支持单个IB，无多IB支持，每次只能制作一个模型部位。
- 需手动指定数据类型

## (4)C++开发的控制台程序 + WinForm开发的GUI界面：MMT(Migoto Mod Tools)

诞生背景：

NMBT虽然满足基本使用，但是图形化界面过于简陋，对于多个IB的支持需要通过逗号在文本框中进行分隔，
于是选中WinForm进行开发，通过DataGridView来很方便的实现多IB支持

特性：

- 基于C++开发的CLI程序，执行速度极快
- 基于WinForm的图形化界面，操作友好
- 多IB支持，革新Mod制作体验
- 基于数据类型的设计使其天然支持Mod逆向
- 内置全自动贴图识别
- 内置全自动数据类型识别

缺点：

- 图形化界面仍然很丑，MMT转为开源项目后，被gui_collect的炫酷界面和近似的功能效果所取代
- 基于txt的文件模型提取无法满足UE游戏的Mod制作支持，对于部分特殊格式的txt解析很困难，只能提取部分模型

## (5)C++开发的控制台程序 + WinForm开发的GUI界面：DBMT(DirectX Buffer Mod Tools)

诞生背景：

MMT虽然满足基本使用，但是其设计过于简陋，且生成Mod使用C++代码开发，面对日益复杂的Mod制作需求，
每次运行都需要经过编译 + 复制 + 执行 + 查看运行日志的整套流程，每次测试都需要花费2分钟左右，
于是想要将Mod生成转为在Blender插件内进行，其次基于txt的分析过于不准确，在不断学习下领悟了需要基于Buffer进行分析
此外GUI已经被gui_collect秒杀，需要升级GUI否则落后太多了。

特性：
- 基于C++开发的CLI程序，仅负责模型提取，速度极快。
- 基于WinForm的图形化界面，操作友好，后期转为WinUI3界面，操作丝滑流畅，界面整体大幅度升级。
- 基于Buffer的文件分析和模型提取。
- 生成Mod转为使用Blender插件，解放了生成Mod的测试速度。
- 新增基于贴图标记的自动贴图识别。
- 内置自动数据类型识别。

缺点：
- 模型提取基于C++开发，同样遇到了测试瓶颈，平均每次测试需要2分钟时间
- 内置3Dmigoto，与XXMI Launcher形成技术代差，启动器方面仍使用自己配置的启动器，全方面落后

## (6)基于WinUI3开发的全新Mod制作工具：SSMT(Super Simple Migoto Tools)

诞生背景：

DBMT虽然已满足基本制作需求，但是由于守旧 + 固执，未能与主流工具XXMI Launcher，XXMI Tools，WWMI-Tools等工具接轨
技术上严重落后，无法满足日益增长的Mod制作需求，基于C++开发的核心程序测试极为困难，在追赶XXMI系列工具的过程中，
浪费了大量时间在模型提取的测试上，内置的3Dmigoto与XXMI系列形成代差过大，导致整个DBMT变为几乎无人使用的垃圾项目，
开发进度一度陷入停滞

特性：
- 全部基于C#开发，开发效率极大提升，使用WinUI3构造复杂华丽的界面，领先的界面。
- 全面兼容XXMI Launcher大部分功能，加载器改为自动从Github获取
- 基于数据类型 + Buffer文件，轻松实现任意3Dmigoto支持游戏的模型提取 + Mod逆向功能
- 极速优化的Blender插件，全面兼容XXMI-Tools，WWMI-Tools大部分功能
- 领先的贴图标记功能
- 领先的数据类型自动识别功能
- 分支架构实现方便的切换Mod、全自动GUI面板Mod生成
- Mod制作标准、制作流程与XXMI、WWMI系列工具全面同步，功能上已不分上下，各有特色

缺点：
- WinUI3架构的缺点实在太多了，列举不下了，目前所有的瓶颈都是由于WinUI3导致的。
- 无法实现复杂的Mod管理页面，WinUI3天生不适合做这个
- 无法以管理员权限启动，否则部分功能损坏，这是UWP的天然限制
- 不支持Windwos7，甚至部分Win10都无法运行.net 9.0的SDK
- 开发时没有未雨绸缪使用MVVM架构，导致无法实现复杂UI界面，无法做到启动器中的王者级界面，无法对标CollapsedLauncher
- 体积占用过于大，120MB
- 内存占用过于大，最低230MB
- 执行速度过于慢，C#还不如旧的C++架构执行速度快
- 由于无法管理员权限启动，导致必须包含一个3Dmigoto Loader.exe导致此程序被SmartScreen拦截，导致用户体验不佳
- 由于无法管理员权限启动，无法调用部分Win32 API，无法实现高级功能，这导致很多功能必须以C++插件的形式存在。
- 无法使用管理员权限启动，否则部分功能，比如选择文件，选择文件夹无法使用。
- GUI线程基于Composition API，会因为磁盘写入而导致卡顿，这时常导致程序莫名其妙卡顿或卡死。
- Win10上无法进行拖拽操作。
- 奇怪的BUG，克苏鲁BUG，无法解释，无法溯源，DEBUG摸索都无法排查到的BUG。
- 不够灵活的组件，受限制极大的组件。
- 缓慢的更新速度，社区里WinUI3相关内容的更新速度太慢了，很多BUG也无法得到修复。
- 实现复杂特效过于困难，甚至有些特效实现起来需要很底层的知识，需要造轮子。
- 基于controller的窗口颜色过滤透明度，即TintOpacity无法实时调整，必须重启才能生效。
- WinUI3的内存占用太高了，这导致在部分低配电脑上图片都无法完全加载。
- 由于WinUI3限制必须不能使用管理员权限启动，但是有些电脑上的权限策略是默认管理员的，这导致部分用户根本没法使用SSMT。

## (7)基于Rust + Tauri开发的SSMT4 (Super Simple Migoto Tools 4th)

诞生背景：WinUi3本身的缺陷无法满足日益复杂的需求

特性：

- 基于Rust + Tauri开发，前后端分离，跨平台，。
- 可以管理员权限运行，部分功能可以完全内置，可以操作系统底层以实现复杂需求。
- 前端可扩展性灵活，可以实现任意复杂的需求，不受WinUI3限制
- Rust可确保执行速度快的同时不会造成内存泄漏，架构优于C++编写的CLI，执行速度极快
- 跨平台（为DX12以及其它平台的同类工具准备好）
- 内存占用小，打包体积小

缺点：

- 架构较新，稳定性未知
- 后端使用Rust开发，开发与维护成本高，预计参与开发人数减少。
- 前端开发刚需相关知识，开发与维护成本高，预计参与开发人数减少。
- 其它缺点仍在摸索中

## 总结

截至SSMT4，使用Rust + Tauri预计可解决上述WinUI3导致的所有问题，使SSMT完成升级，进入下一个历史阶段。

此次重构是基于未来10-20年的长期开发设计考虑，SSMT作为一个兴趣爱好项目将长期在业余时间持续开发，预计每周投入2小时时间进行维护。

Rust + Tauri战未来





